import { ViewChild, Input, Component, OnInit } from '@angular/core';
import {Â CharactersService } from '../../services/characters.service';
import { NgbModalRef, NgbModal, ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';
import { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';
import { Character } from '../../models/character';
import { FormGroup, FormBuilder,FormControl, Validators } from '@angular/forms';

@Component({
  selector: 'app-add-character',
  templateUrl: './add-character.component.html',
  styleUrls: ['./add-character.component.css']
})
export class AddCharacterComponent {

    @ViewChild('AddCharacterModal') addCharacterModal;
    private modalRef: NgbModalRef;
    closeResult: string;


    public _charForm: FormGroup;
    public character: Character;
    
    constructor(
      public activeModal: NgbActiveModal,
      private modal: NgbModal, 
      private characterService: CharactersService, 
      private _formBuilder: FormBuilder
      ) {
        this.character = new Character(0,'','','','',0);
        this.createForm();
      }

  createForm() {
      //this.getPersona();
        this._charForm = this._formBuilder.group({
        name: [ '', [Validators.required]],
        bio: [ '', [Validators.required]],
        img: [ '' , [Validators.required]],
        release: [ '' , [Validators.required]],
        category: [ '' , [Validators.required]],
        });
  }

  open(){
     this.modalRef = this.modal.open(this.addCharacterModal)
     this.modalRef.result.catch(() => {});
  }

  closeModal(){
    this.modalRef.close();
  }

  submitForm() {
    console.log("Form was submitted!");
    console.log(this._charForm.value);
    this.activeModal.close(this._charForm.value);
  }
}
